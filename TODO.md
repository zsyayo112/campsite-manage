# 营地旅游管理系统 - 开发待办清单

## 📋 总体进度

- [ ] Phase 1: 环境搭建
- [ ] Phase 2: 核心功能开发
- [ ] Phase 3: 测试和优化
- [ ] Phase 4: 部署上线

---

## Phase 1: 环境搭建和项目初始化 ⚙️

### 1.1 开发环境配置
- [ ] 安装 Node.js (v18.x 或更高)
  - 访问 https://nodejs.org 下载安装
  - 验证安装：`node -v` 和 `npm -v`
- [ ] 安装 Git
  - 访问 https://git-scm.com/download/win
  - 配置用户信息：`git config --global user.name "Your Name"`
  - 配置邮箱：`git config --global user.email "your.email@example.com"`
- [ ] 安装 VS Code
  - 访问 https://code.visualstudio.com/
  - 安装推荐插件：
    - ES7+ React/Redux/React-Native snippets
    - Tailwind CSS IntelliSense
    - Prettier - Code formatter
    - ESLint
    - Prisma

### 1.2 项目初始化
- [ ] 创建项目根目录
  ```bash
  mkdir camp-management-system
  cd camp-management-system
  ```
- [ ] 初始化 Git 仓库
  ```bash
  git init
  ```
- [ ] 创建前端项目
  ```bash
  npx create-react-app frontend
  cd frontend
  npm install react-router-dom axios tailwindcss recharts date-fns
  npx tailwindcss init
  ```
- [ ] 创建后端项目
  ```bash
  cd ..
  mkdir backend
  cd backend
  npm init -y
  npm install express cors dotenv jsonwebtoken bcryptjs prisma @prisma/client
  npm install -D nodemon
  ```
- [ ] 配置 Prisma
  ```bash
  npx prisma init
  ```

### 1.3 项目结构搭建
- [ ] 创建前端目录结构
  ```
  frontend/
  ├── src/
  │   ├── components/     # 可复用组件
  │   ├── pages/          # 页面组件
  │   ├── context/        # 全局状态
  │   ├── api/            # API调用
  │   ├── utils/          # 工具函数
  │   └── App.js
  ```
- [ ] 创建后端目录结构
  ```
  backend/
  ├── src/
  │   ├── routes/         # 路由
  │   ├── controllers/    # 控制器
  │   ├── models/         # 数据模型
  │   ├── middleware/     # 中间件
  │   └── server.js
  ```

### 1.4 数据库设计
- [ ] 设计数据库 Schema
- [ ] 编写 Prisma Schema 文件
- [ ] 运行数据库迁移
  ```bash
  npx prisma migrate dev --name init
  ```
- [ ] 生成 Prisma Client
  ```bash
  npx prisma generate
  ```

---

## Phase 2: 核心功能开发 💻

### 2.1 用户认证系统（Day 1）

#### 后端
- [ ] 创建用户模型 (Prisma Schema)
- [ ] 实现注册 API
  - [ ] 密码加密 (bcrypt)
  - [ ] 数据验证
- [ ] 实现登录 API
  - [ ] 密码验证
  - [ ] JWT Token 生成
- [ ] 实现认证中间件
  - [ ] Token 验证
  - [ ] 用户信息解析
- [ ] 实现登出功能

#### 前端
- [ ] 创建登录页面组件
- [ ] 创建注册页面组件（可选）
- [ ] 实现登录表单
  - [ ] 表单验证
  - [ ] 错误提示
- [ ] 实现 Auth Context
  - [ ] 存储用户状态
  - [ ] 存储 Token (localStorage)
- [ ] 实现路由保护
  - [ ] 私有路由组件
  - [ ] 未登录重定向

#### 测试
- [ ] 测试注册流程
- [ ] 测试登录流程
- [ ] 测试 Token 过期处理
- [ ] 测试权限验证

---

### 2.2 客户管理模块（Day 2-3）

#### 后端 API
- [ ] GET /api/customers - 获取客户列表
  - [ ] 支持分页
  - [ ] 支持搜索（姓名、手机）
  - [ ] 支持筛选（来源、标签）
  - [ ] 支持排序
- [ ] GET /api/customers/:id - 获取客户详情
- [ ] POST /api/customers - 创建客户
  - [ ] 数据验证
  - [ ] 重复检查（手机号）
- [ ] PUT /api/customers/:id - 更新客户
- [ ] DELETE /api/customers/:id - 删除客户
- [ ] GET /api/customers/:id/orders - 获取客户订单历史
- [ ] GET /api/customers/stats - 获取客户统计

#### 前端页面
- [ ] 创建客户列表页面
  - [ ] 表格展示
  - [ ] 搜索框
  - [ ] 筛选器（来源、标签）
  - [ ] 分页器
  - [ ] 操作按钮（查看、编辑、删除）
- [ ] 创建客户详情页面
  - [ ] 基本信息展示
  - [ ] 消费记录展示
  - [ ] 访问历史
  - [ ] 编辑按钮
- [ ] 创建添加/编辑客户表单
  - [ ] 姓名输入
  - [ ] 手机输入（验证格式）
  - [ ] 微信号输入
  - [ ] 来源选择（小红书/微信/其他）
  - [ ] 标签选择（多选）
  - [ ] 备注输入
  - [ ] 保存按钮

#### 功能实现
- [ ] 客户搜索功能
- [ ] 客户标签管理
  - [ ] 添加标签
  - [ ] 删除标签
  - [ ] 标签颜色
- [ ] 客户数据导出（CSV）
- [ ] 批量操作（批量删除、批量打标签）

#### 测试
- [ ] 测试创建客户
- [ ] 测试更新客户信息
- [ ] 测试搜索功能
- [ ] 测试筛选功能
- [ ] 测试删除客户

---

### 2.3 订单管理模块（Day 4-5）

#### 后端 API
- [ ] GET /api/orders - 获取订单列表
  - [ ] 支持分页
  - [ ] 支持筛选（状态、日期范围）
  - [ ] 支持排序
- [ ] GET /api/orders/:id - 获取订单详情
- [ ] POST /api/orders - 创建订单
  - [ ] 数据验证
  - [ ] 生成订单号
  - [ ] 关联客户
  - [ ] 关联项目
- [ ] PUT /api/orders/:id - 更新订单
- [ ] PATCH /api/orders/:id/status - 更新订单状态
- [ ] DELETE /api/orders/:id - 删除订单
- [ ] GET /api/projects - 获取项目列表
- [ ] POST /api/projects - 创建项目
- [ ] PUT /api/projects/:id - 更新项目

#### 前端页面
- [ ] 创建订单列表页面
  - [ ] 表格展示（订单号、客户、项目、日期、金额、状态）
  - [ ] 状态筛选标签
  - [ ] 日期范围筛选
  - [ ] 搜索框（订单号、客户名）
  - [ ] 操作按钮
- [ ] 创建订单详情页面
  - [ ] 订单基本信息
  - [ ] 客户信息
  - [ ] 项目详情
  - [ ] 状态更新按钮
  - [ ] 编辑按钮
- [ ] 创建添加/编辑订单表单
  - [ ] 客户选择（搜索下拉）
  - [ ] 项目选择（多选）
  - [ ] 访问日期选择
  - [ ] 人数输入
  - [ ] 金额计算（自动/手动）
  - [ ] 备注输入
  - [ ] 保存按钮
- [ ] 创建项目管理页面
  - [ ] 项目列表
  - [ ] 添加/编辑项目
  - [ ] 价格设置
  - [ ] 季节设置

#### 功能实现
- [ ] 订单状态流转
  - 待确认 → 已确认 → 已完成
  - 任意状态 → 已取消
- [ ] 订单号自动生成（规则：日期+序号）
- [ ] 金额自动计算
- [ ] 订单日历视图（可选）
- [ ] 订单数据导出

#### 测试
- [ ] 测试创建订单
- [ ] 测试订单状态更新
- [ ] 测试订单筛选
- [ ] 测试订单搜索
- [ ] 测试金额计算

---

### 2.4 内容管理模块（Day 6-7）

#### 后端 API
- [ ] GET /api/notes - 获取笔记列表
  - [ ] 支持分页
  - [ ] 支持筛选（状态、标签）
  - [ ] 支持排序
- [ ] GET /api/notes/:id - 获取笔记详情
- [ ] POST /api/notes - 创建笔记
- [ ] PUT /api/notes/:id - 更新笔记
- [ ] DELETE /api/notes/:id - 删除笔记
- [ ] PATCH /api/notes/:id/status - 更新笔记状态
- [ ] POST /api/notes/:id/stats - 更新笔记数据

#### 前端页面
- [ ] 创建笔记列表页面
  - [ ] 卡片/列表切换视图
  - [ ] 状态筛选（全部/草稿/已发布）
  - [ ] 标签筛选
  - [ ] 搜索功能
  - [ ] 操作按钮
- [ ] 创建笔记详情页面
  - [ ] 标题和内容展示
  - [ ] 图片展示
  - [ ] 数据统计（浏览、点赞、评论、收藏）
  - [ ] 编辑按钮
- [ ] 创建添加/编辑笔记表单
  - [ ] 标题输入
  - [ ] 内容输入（富文本编辑器，可选）
  - [ ] 状态选择
  - [ ] 发布日期选择
  - [ ] 标签选择（多选）
  - [ ] 图片上传
  - [ ] 保存按钮
- [ ] 创建发布计划日历
  - [ ] 日历视图
  - [ ] 已发布/待发布标记
  - [ ] 点击查看详情

#### 功能实现
- [ ] 图片上传和预览
- [ ] 数据统计录入
- [ ] 标签管理
- [ ] 发布计划提醒（可选）
- [ ] 笔记数据导出

#### 测试
- [ ] 测试创建笔记
- [ ] 测试编辑笔记
- [ ] 测试图片上传
- [ ] 测试状态切换
- [ ] 测试数据统计更新

---

### 2.5 统计分析模块（Day 8-9）

#### 后端 API
- [ ] GET /api/stats/revenue - 营收统计
  - [ ] 日/周/月/年统计
  - [ ] 时间范围筛选
- [ ] GET /api/stats/orders - 订单统计
  - [ ] 订单量趋势
  - [ ] 状态分布
- [ ] GET /api/stats/customers - 客户统计
  - [ ] 新增客户趋势
  - [ ] 来源分析
  - [ ] 复购率
- [ ] GET /api/stats/projects - 项目统计
  - [ ] 各项目订单量
  - [ ] 营收占比

#### 前端页面
- [ ] 创建仪表盘页面
  - [ ] 核心指标卡片
    - 今日营收
    - 本月营收
    - 订单总数
    - 客户总数
  - [ ] 营收趋势图（折线图）
  - [ ] 订单状态分布（饼图）
  - [ ] 项目热度排行（柱状图）
  - [ ] 客户来源分布（饼图）
  - [ ] 时间范围选择器
- [ ] 创建详细报表页面
  - [ ] 营收详细报表
  - [ ] 订单详细报表
  - [ ] 客户详细报表
  - [ ] 项目详细报表
  - [ ] 导出功能

#### 功能实现
- [ ] 数据可视化（使用 Recharts）
- [ ] 时间范围筛选
- [ ] 数据刷新
- [ ] 报表导出（Excel/CSV）

#### 测试
- [ ] 测试各项统计数据准确性
- [ ] 测试图表展示
- [ ] 测试时间范围筛选
- [ ] 测试数据导出

---

### 2.6 UI 优化和响应式设计（Day 10）

- [ ] 统一整体设计风格
  - [ ] 配色方案
  - [ ] 字体设置
  - [ ] 间距规范
- [ ] 响应式布局优化
  - [ ] 移动端适配
  - [ ] 平板适配
  - [ ] 桌面端优化
- [ ] 交互优化
  - [ ] Loading 状态
  - [ ] 错误提示
  - [ ] 成功提示
  - [ ] 确认对话框
- [ ] 侧边栏导航
  - [ ] 图标
  - [ ] 折叠/展开
  - [ ] 活动状态
- [ ] 顶部导航栏
  - [ ] 用户信息
  - [ ] 通知（可选）
  - [ ] 登出按钮

---

## Phase 3: 测试和优化 🧪 ✅

### 3.1 功能测试（Day 11）✅
- [x] 用户认证流程完整测试
- [x] 客户管理所有功能测试
- [x] 订单管理所有功能测试
- [x] 内容管理所有功能测试
- [x] 统计分析所有功能测试
- [x] 跨模块功能测试
  - [x] 创建订单时关联客户
  - [x] 订单完成后更新客户数据
  - [x] 统计数据的准确性
- **测试结果: 31/31 项通过 (100%)**

### 3.2 性能优化（Day 12）✅
- [x] 前端优化
  - [x] 代码分割 (React.lazy) - 14个页面组件懒加载
  - [x] 图片优化 - 使用SVG图标
  - [x] 缓存策略 - 浏览器缓存
- [x] 后端优化
  - [x] 数据库查询优化 - Prisma ORM
  - [x] 添加数据库索引 - 已在schema中配置
  - [x] API 响应缓存 - 待后续需求
- [x] 加载速度测试 - 构建成功

### 3.3 Bug 修复（Day 13）✅
- [x] 收集测试中发现的 Bug
- [x] 按优先级修复 Bug
  - [x] 修复订单导出缺少客户信息问题
  - [x] 修复订单创建时空套餐项目的问题
  - [x] 修复Toast通知调用方式
- [x] 回归测试

### 3.4 用户体验优化 ✅
- [x] 操作流程简化 - 统一的表单交互
- [x] 提示信息完善 - Toast通知系统
- [ ] 快捷键支持（可选）
- [ ] 批量操作优化（可选）

---

## Phase 4: 部署上线 🚀

### 4.1 生产环境准备（Day 14）
- [ ] 选择服务器
  - 阿里云轻量应用服务器
  - 腾讯云轻量应用服务器
  - Vultr / DigitalOcean
- [ ] 购买域名（可选）
- [ ] 服务器基础配置
  - [ ] 安装 Node.js
  - [ ] 安装 Nginx
  - [ ] 安装 PostgreSQL（或继续使用 SQLite）
  - [ ] 配置防火墙

### 4.2 应用部署
- [ ] 前端构建
  ```bash
  npm run build
  ```
- [ ] 后端配置
  - [ ] 环境变量配置
  - [ ] 数据库连接配置
  - [ ] JWT Secret 配置
- [ ] Nginx 配置
  - [ ] 前端静态文件服务
  - [ ] 后端 API 反向代理
  - [ ] SSL 证书配置（Let's Encrypt）
- [ ] 启动应用
  - [ ] 使用 PM2 管理 Node.js 进程
  - [ ] 配置开机自启动

### 4.3 数据备份
- [ ] 配置数据库自动备份
  - [ ] 每日备份脚本
  - [ ] 备份到云存储
- [ ] 配置日志管理
- [ ] 监控配置（可选）

### 4.4 上线检查
- [ ] 功能全面测试
- [ ] 性能测试
- [ ] 安全检查
  - [ ] SQL 注入防护
  - [ ] XSS 防护
  - [ ] CSRF 防护
- [ ] 备份验证

---

## Phase 5: 文档和培训 📚

### 5.1 文档编写
- [ ] 用户操作手册
  - [ ] 登录指南
  - [ ] 客户管理操作
  - [ ] 订单管理操作
  - [ ] 内容管理操作
  - [ ] 统计查看操作
- [ ] 技术文档
  - [ ] API 文档
  - [ ] 数据库设计文档
  - [ ] 部署文档
- [ ] 常见问题 FAQ

### 5.2 培训
- [ ] 录制操作演示视频
- [ ] 现场培训演示
- [ ] 答疑解惑

---

## 持续迭代 🔄

### 短期优化（1-3个月）
- [ ] 根据使用反馈优化 UI/UX
- [ ] 修复使用中发现的 Bug
- [ ] 性能调优
- [ ] 功能微调

### 中期扩展（3-6个月）
- [ ] 微信小程序对接
  - [ ] 订单同步
  - [ ] 客户同步
- [ ] 小红书 API 对接（如有）
- [ ] 移动端 App（React Native）
- [ ] 营销功能
  - [ ] 优惠券系统
  - [ ] 会员系统
  - [ ] 积分系统

### 长期规划（6-12个月）
- [ ] 多角色权限系统
- [ ] 员工管理模块
- [ ] 库存管理
- [ ] 财务管理
- [ ] 数据大屏
- [ ] AI 智能推荐

---

## 🔖 快速检查清单

### 开发前
- [ ] Node.js 已安装
- [ ] Git 已安装
- [ ] VS Code 已安装并配置
- [ ] 项目目录已创建
- [ ] 数据库设计完成

### 开发中
- [ ] 代码每天提交 Git
- [ ] 功能开发完成后自测
- [ ] 及时记录问题和想法
- [ ] 定期备份数据

### 部署前
- [ ] 所有功能测试通过
- [ ] 性能达标
- [ ] 文档准备完成
- [ ] 备份方案就绪

---

## 📝 备注区域

### 技术难点预估
1. **图片上传处理** - 需要处理文件大小、格式验证
2. **数据统计计算** - 需要优化查询性能
3. **响应式设计** - 需要适配多种设备

### 待确认事项
- [ ] 是否需要支付功能？
- [ ] 是否需要短信通知？
- [ ] 是否需要打印功能（订单、报表）？
- [ ] 预算范围？

### 资源链接
- React 文档: https://react.dev/
- Tailwind CSS: https://tailwindcss.com/
- Prisma: https://www.prisma.io/
- Express: https://expressjs.com/

---

**创建日期**: 2026-01-09  
**预计完成**: 2026-01-29 (约 20 天)  
**当前状态**: ⏳ 准备开始

---

## ✅ 今天的任务（Day 1）

1. [ ] 安装 Node.js
2. [ ] 安装 Git
3. [ ] 安装 VS Code 和插件
4. [ ] 创建项目目录结构
5. [ ] 初始化前后端项目
6. [ ] 安装必要的依赖包
7. [ ] 设计数据库 Schema

**预计耗时**: 2-3 小时

---

**Good luck! 加油！🚀**
